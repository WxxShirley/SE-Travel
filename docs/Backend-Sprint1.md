## 后端API需求Sprint1

* 爬取和建立上海市旅游景区数据库

  > 需要的数据类型：
  >
  > 必须：景区基本的地理位置信息、景区介绍与门票、每个景区2张及2张以上图片
  >
  > > 另外，我们提供了“当季景点“的功能，大致上按月份[12,1,2],[3,4,5],[6,7,8],[9,10,11]粗略划分一下，把海洋馆或者欢乐谷之类的户外放在夏季，公园类的在春季，大概排一下....
  >>
  > > 最好同时生成json文件，我将根据大小决定是否在本地存储
  > 
  > ```javascript
  >var attraction = {
  >   id: "0001", // 唯一标志
  >   title: "外滩",
  >   description: "上海地标，夜景美轮美奂",
  >   price: 0,
  >   season: [0,1,2,3], //适合的季节,0,1,2,3分别代表冬、春、夏、秋
  >   nearBy: ["0002","0003"], // 附近3公里内的其他景区id集合，爬取到经纬度后可以计算出来距离
  >   geoInfo: {district:"黄浦区", location:"上海市黄浦区中山东一路",latitude:xx, longtitude:xxx},
  >   imgSrc: [
  >       "../../images/waterfall/1.jpeg",// 这些后面都要换成服务端提供的图片地址，所有图片都存储在服务端
  >       "../../images/waterfall/4.jpeg"
  >   ],
  >   hotDegree: 0, // 初始化热度都是0，出现在搜索集合中+1
  > }
  > ```

* 图片的存储和加载

  由于小程序前端对包大小限制非常严格，必须把所有图片存储在服务端. 将景区的图片都存储在云服务器上，并且提供加载对应图片的办法

* 按名称搜索景区的云函数

  ```javascript
  e.g "/api/attraction?input_text=外滩"
  前端参数：
  input_text（用户输入的查询内容） ,类型为string
  
  后端返回的结果：
  // 成功查询
  {
    "status":1,
    "object": 匹配的景点对象集合
  }
  // 失败查询
  {
    "status":0
  }
  ```

* 实时热门景区

  根据用户查询统计景区的热门度（比如被搜索过1次，hotDegree自增1）。

  提供返回前十个热门景区的功能

  ```javascript
  e.g "/api/attraction/get_hot"
  前端参数
  
  后端返回结果：
  前十个热度最高的景区对象集合
  ```

* 给定景区ID返回景区对象

  ```javascript
  e.g. "/api/attraction/get_detail?id=0001"
  前端参数:
  id - 景区的ID
  
  后端返回结果：
  // 成功查询
  {
    "status":1,
    "object": 景区对象
  }
  // 失败查询
  {
    "status":0
  }
  ```

  



